!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.watermark=n():t.watermark=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return t[r].call(u.exports,u,u.exports,n),u.loaded=!0,u.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){e(1),t.exports=e(2)["default"]},function(t,n){"use strict";n.__esModule=!0,n["default"]=function(){},t.exports=n["default"]},function(t,n,e){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function u(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n["default"]=t,n}function o(t){return(0,h.extend)((0,h.clone)(v),t)}function i(t,n){var e=t.canvas,r=t.sources,u=(0,f.dataUrl)(e);return r.forEach(n.release),u}function c(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=o(n);return e||(e=(0,a.load)(t,r.init)),{dataUrl:function(n){var e=this.then(function(t){return(0,a.mapToCanvas)(t,g["default"])}).then(function(t){return s.result(n,t)}).then(function(t){return i(t,g["default"])});return c(t,r,e)},load:function(t,n){var e=this.then(function(e){return(0,a.load)([e].concat(t),n)});return c(t,r,e)},render:function(){var n=this.then(function(t){return(0,a.load)([t])});return c(t,r,n)},blob:function(n){var e=this.dataUrl(n).then(l.blob);return c(t,r,e)},image:function(n){var e=this.dataUrl(n).then(a.createImage);return c(t,r,e)},then:function(){for(var t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.then.apply(e,n)}}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=c;var a=e(3),f=e(5),l=e(6),d=e(7),s=u(d),h=e(10),p=e(11),g=r(p),v={init:function(){}};c.image=s.image,c.text=s.text,c.destroy=function(){return g["default"].clear()}},function(t,n,e){"use strict";function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function u(t,n,e){t.onload=function(){return e(t)},t.src=n}function o(t){var n="undefined"==typeof t?"undefined":r(t);return"string"===n?c:t instanceof Image?h.identity:a}function i(t,n){for(var e=[],r=0;r<t.length;r++){var u=t[r],i=o(u),c=i(u,n);e.push(c)}return Promise.all(e)}function c(t,n){var e=new Image;return"function"==typeof n&&n(e),new Promise(function(n){e.onload=function(){return n(e)},e.src=t})}function a(t){var n=new FileReader;return new Promise(function(e){var r=new Image;n.onloadend=function(){return u(r,n.result,e)},n.readAsDataURL(t)})}function f(t,n){var e=new Image;return"function"==typeof n&&(e.onload=n),e.src=t,e}function l(t,n){var e=n.getContext("2d");return n.width=t.width,n.height=t.height,e.drawImage(t,0,0),n}function d(t,n){var e=n.pop();return l(t,e)}function s(t,n){return t.map(function(t){return d(t,n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.getLoader=o,n.load=i,n.loadUrl=c,n.loadFile=a,n.createImage=f,n.imageToCanvas=d,n.mapToCanvas=s;var h=e(4)},function(t,n){"use strict";function e(){for(var t=arguments.length,n=Array(t),e=0;t>e;e++)n[e]=arguments[e];return function(t){return n.reduce(function(t,n){return n.call(null,t)},t)}}function r(t){return t}Object.defineProperty(n,"__esModule",{value:!0}),n.sequence=e,n.identity=r},function(t,n){"use strict";function e(t){return t.toDataURL()}Object.defineProperty(n,"__esModule",{value:!0}),n.dataUrl=e},function(t,n,e){"use strict";function r(t){return c.exec(t).slice(1)}function u(t){return window.atob(t)}function o(t){for(var n=t.length,e=new Uint8Array(n),r=0;n>r;r++)e[r]=t.charCodeAt(r);return e}Object.defineProperty(n,"__esModule",{value:!0}),n.blob=void 0,n.split=r,n.decode=u,n.uint8=o;var i=e(4),c=/^data:([^;]+);base64,(.*)$/;n.blob=(0,i.sequence)(r,function(t){return[u(t[1]),t[0]]},function(t){return new Blob([o(t[0])],{type:t[1]})})},function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n["default"]=t,n}function u(t,n){var e=t.apply(null,n);return{canvas:e,sources:n}}Object.defineProperty(n,"__esModule",{value:!0}),n.text=n.image=void 0,n.result=u;var o=e(8),i=r(o),c=e(9),a=r(c);n.image=i,n.text=a},function(t,n){"use strict";function e(t,n,e){return e||(e=1),function(r,u){var o=r.getContext("2d");return o.save(),o.globalAlpha=e,o.drawImage(u,t(r,u),n(r,u)),o.restore(),r}}function r(t){return e(function(t,n){return t.width-(n.width+10)},function(t,n){return t.height-(n.height+10)},t)}function u(t){return e(function(t,n){return t.width-(n.width+10)},function(t,n){return 10},t)}function o(t){return e(function(t,n){return 10},function(t,n){return t.height-(n.height+10)},t)}function i(t){return e(function(t,n){return 10},function(t,n){return 10},t)}function c(t){return e(function(t,n){return(t.width-n.width)/2},function(t,n){return(t.height-n.height)/2},t)}function a(t,n,r){return e(function(t,e){return(t.width-e.width)*(n/100)},function(t,n){return(t.height-n.height)*(r/100)},t)}Object.defineProperty(n,"__esModule",{value:!0}),n.atPos=e,n.lowerRight=r,n.upperRight=u,n.lowerLeft=o,n.upperLeft=i,n.center=c,n.custom=a},function(t,n){"use strict";function e(t,n,e,r,u,o){return o||(o=1),function(i){var c=i.getContext("2d");c.save(),c.globalAlpha=o,c.fillStyle=u,c.font=r;var a=c.measureText(e);return c.fillText(e,t(i,a,c),n(i,a,c)),c.restore(),i}}function r(t,n,r,u,o){return e(function(t,n){return t.width-(n.width+10)},function(t){return o||t.height-10},t,n,r,u)}function u(t,n,r,u,o){return e(function(){return 10},function(t){return o||t.height-10},t,n,r,u)}function o(t,n,r,u,o){return e(function(t,n){return t.width-(n.width+10)},function(){return o||20},t,n,r,u)}function i(t,n,r,u,o){return e(function(){return 10},function(){return o||20},t,n,r,u)}function c(t,n,r,u,o){return e(function(t,n,e){return e.textAlign="center",t.width/2},function(t,n,e){return e.textBaseline="middle",t.height/2},t,n,r,u)}Object.defineProperty(n,"__esModule",{value:!0}),n.atPos=e,n.lowerRight=r,n.lowerLeft=u,n.upperRight=o,n.upperLeft=i,n.center=c},function(t,n){"use strict";function e(t,n){var e=Object.keys(n);return e.forEach(function(e){return t[e]=n[e]}),t}function r(t){return e({},t)}Object.defineProperty(n,"__esModule",{value:!0}),n.extend=e,n.clone=r},function(t,n){"use strict";function e(){var t=[];return{pop:function(){return 0===this.length&&t.push(document.createElement("canvas")),t.pop()},get length(){return t.length},release:function(n){var e=n.getContext("2d");e.clearRect(0,0,n.width,n.height),t.push(n)},clear:function(){t.splice(0,t.length)},get elements(){return t}}}Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasPool=e;var r=e();n["default"]=r}])});